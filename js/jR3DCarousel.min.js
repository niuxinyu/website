!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(T){T.fn.jR3DCarousel=function(t){function n(){this.animations={slide:i,slide3D:a,scroll:e,scroll3D:o,fade:s}}function i(t){k.css({perspective:"",overflow:"hidden"}),j=u*t,Z.css({transform:"translateZ("+-f+"px) rotateY("+-j+"deg)"}),r()}function a(t){k.css({perspective:p,overflow:"visible"}),j=u*t,Z.css({transform:"translateZ("+-f+"px) rotateY("+-j+"deg)"}),r()}function e(t){k.css({perspective:"",overflow:"hidden"}),j=u*t,Z.css({transform:"translateZ("+-f+"px) rotateX("+-j+"deg)"}),r()}function o(t){k.css({perspective:p,overflow:"visible"}),j=u*t,Z.css({transform:"translateZ("+-f+"px) rotateX("+-j+"deg)"}),r()}function s(t){Z.css({transition:"opacity "+I.animationDuration+"ms "+I.animationCurve,opacity:0}),k.find(".nav").css({backgroundColor:"rgba(255, 255, 255, 0.77)"}).eq(O%q).css({backgroundColor:"rgba(0, 0, 0, 1)"}),clearTimeout(n);var n=setTimeout(function(){j=u*t,Z.css({transform:"translateZ("+-f+"px) rotateY("+-j+"deg)",opacity:1}),P=(Math.round(j/u)-1)%q,I.onSlideShow.call(this,Z.find("."+I.slideClass).eq((P+1)%q))},I.animationDuration)}function r(){k.find(".nav").css({backgroundColor:"rgba(255, 255, 255, 0.77)"}).eq(O%q).css({backgroundColor:"rgba(0, 0, 0, 0.77)"}),P=(Math.round(j/u)-1)%q,I.onSlideShow.call(this,Z.find("."+I.slideClass).eq((P+1)%q))}function d(){k.width("100%"),y=k.width()<I.width?k.width():I.width,D=y/S,k.css({width:y+"px",height:D+"px"}),-1!=I.animation.indexOf("slide")?(f=y/2/Math.tan(Math.PI/q),p=y/2*Math.tan(2*Math.PI/q)+"px"):-1!=I.animation.indexOf("scroll")?(f=D/2/Math.tan(Math.PI/q),p=D/2*Math.tan(2*Math.PI/q)+"px"):"fade"==I.animation&&(f=y/2/Math.tan(Math.PI/q),p=y/2*Math.tan(2*Math.PI/q)+"px"),k.find("."+I.slideClass).each(function(t){var n=T(this);-1!=I.animation.indexOf("slide")?m="rotateY("+u*t+"deg) translateZ("+f+"px)":-1!=I.animation.indexOf("scroll")?m="rotateX("+u*t+"deg) translateZ("+f+"px)":"fade"==I.animation&&(m="rotateY("+u*t+"deg) translateZ("+f+"px)"),n.css({transform:m})}),p=I.perspective||p,Z.css({transform:"translateZ("+-f+"px) rotateY("+-j+"deg)"}),k.css({perspective:p})}var l,c,h,u,f,p,m,g,v,x,w,M,b,C,I=T.extend(!0,{},{width:1349,height:668,slides:[],slideLayout:"fill",perspective:0,animation:"slide3D",animationCurve:"ease",animationDuration:700,animationInterval:2e3,autoplay:!0,controls:!0,slideClass:"jR3DCarouselSlide",navigation:"circles",onSlideShow:function(){}},t),k=this,y=I.width,D=I.height,S=I.width/I.height,Z=T("<div class='jR3DCarousel' />").css({width:"100%",height:"100%",transition:"transform "+I.animationDuration+"ms "+I.animationCurve,transformStyle:"preserve-3d"}).appendTo(k),P=0,O=1,Y=new n,j=0,q=I.slides.length-1||k.find("."+I.slideClass).length-1;return function(){if(-1!=I.animation.indexOf("slide")?(f=y/2/Math.tan(Math.PI/q),p=y/2*Math.tan(2*Math.PI/q)+"px"):-1!=I.animation.indexOf("scroll")?(f=D/2/Math.tan(Math.PI/q),p=D/2*Math.tan(2*Math.PI/q)+"px"):"fade"==I.animation&&(f=y/2/Math.tan(Math.PI/q),p=y/2*Math.tan(2*Math.PI/q)+"px"),u=360/q,I.slides.length)for(var t=0;t<I.slides.length-1;t++){var n=T("<div class='jR3DCarouselSlide' data-index="+t+" />").append("<a><img src='"+I.slides[t].src+"' alt='"+I.slides[t].alt+"' /></a>");-1!=I.animation.indexOf("slide")?m="rotateY("+u*t+"deg) translateZ("+f+"px)":-1!=I.animation.indexOf("scroll")?m="rotateX("+u*t+"deg) translateZ("+f+"px)":"fade"==I.animation&&(m="rotateY("+u*t+"deg) translateZ("+f+"px)"),n.css({transform:m}),Z.append(n)}else k.find("."+I.slideClass).each(function(t){var n=T(this).attr("data-index",t);-1!=I.animation.indexOf("slide")?m="rotateY("+u*t+"deg) translateZ("+f+"px)":-1!=I.animation.indexOf("scroll")?m="rotateX("+u*t+"deg) translateZ("+f+"px)":"fade"==I.animation&&(m="rotateY("+u*t+"deg) translateZ("+f+"px)"),n=n.css({transform:m}).detach(),Z.append(n)});Z.find("."+I.slideClass).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",backfaceVisibility:"hidden"}).find("img").css({width:"100%",height:"100%",objectFit:I.slideLayout}),p=I.perspective||p,k.css({perspective:p,width:y+"px",height:D+"px",position:"relative",overflow:"visible"})}(),I.controls&&(l=T("<div class='previous controls' style='left: 8px; transform: rotate(-45deg);'></div>"),c=T("<div class='next controls' style='right: 8px; transform: rotate(135deg);'></div>"),l.add(c).appendTo(k).css({position:"absolute",top:"42%",zIndex:1,display:"inline-block",padding:"1.2em",boxShadow:"2px 2px 0 rgba(255,255,255,0.9) inset",cursor:"pointer"}).hide(),l.on("click",function(){P=Math.round(j/u),O=P-1,Y.run(I.animation,O)}),c.on("click",function(){P=Math.round(j/u),O=P+1,Y.run(I.animation,O)}),k.on("mouseenter touchstart",function(){l.add(c).fadeIn()}).on("mouseleave touchcancel",function(){l.add(c).fadeOut()}),T(document).on("keydown",function(t){var n=k[0].getBoundingClientRect();(n=0<n.bottom&&0<n.right&&n.left<(innerWidth||document.documentElement.clientWidth)&&n.top<(innerHeight||document.documentElement.clientHeight))&&37==t.which?(clearInterval(h),l.click()):n&&39==t.which&&(clearInterval(h),c.click())}),g=function(t){clearInterval(h),"left"==t?c.click():"right"==t?l.click():-1!=I.animation.indexOf("scroll")&&("down"==t?c.click():"up"==t&&l.click())},k.on("touchstart",function(t){t=t.originalEvent.changedTouches[0],v="none",x=t.pageX,w=t.pageY,C=(new Date).getTime()}).on("touchmove",function(t){t.preventDefault()}).on("touchend",function(t){t=t.originalEvent.changedTouches[0],M=t.pageX-x,b=t.pageY-w,(new Date).getTime()-C<=700&&(20<=Math.abs(M)&&Math.abs(b)<=100?v=M<0?"left":"right":20<=Math.abs(b)&&Math.abs(M)<=100&&(v=b<0?"up":"down")),g(v)})),I.navigation&&function(){for(var t=I.navigation,n=T("<div class=navigation />").css({position:"absolute",bottom:0,right:"22%"}),i=0;i<q;i++)n.append("<div class=nav></div>");"circles"==t&&n.find(".nav").css({borderRadius:"12px"}),n.find(".nav").css({display:"inline-block",margin:"5px",cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.77)",width:"12px",height:"12px",transition:"all "+I.animationDuration+"ms ease"}).first().css({backgroundColor:"rgba(0, 0, 0, 1)"}),Z.after(n),k.on("click",".nav",function(){O=T(this).index(),Y.run(I.animation,O)})}(),I.autoplay&&(h=setInterval(function(){P=Math.round(j/u),O=P+1,Y.run(I.animation,O)},I.animationInterval+I.animationDuration),k.hover(function(){clearInterval(h)},function(){h=setInterval(function(){P=Math.round(j/u),O=P+1,Y.run(I.animation,O)},I.animationInterval+I.animationDuration)})),addEventListener("resize",d),d(),n.prototype.run=function(t,n){this.animations[t](n)},this.showSlide=function(t){Z.find(".nav").eq((t-1)%q).click()},this.getCurrentSlide=function(){return Z.find("."+I.slideClass).eq(P)},this.getSlideByIndex=function(t){return Z.find("."+I.slideClass+"[data-index="+t+"]")},this.showPreviousSlide=function(){l.click()},this.showNextSlide=function(){c.click()},this}});